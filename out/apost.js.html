<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: apost.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: apost.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { listAPost,deletePost, listEditPost} from "./utils.mjs";


const params = new URLSearchParams(document.location.search);
const id = params.get("id");
const API_BASE_URL = "https://nf-api.onrender.com/api/v1";
const aPostEndPoint="/social/posts/"; // GET
const moreDataPoint="?_author=true&amp;_reactions=true&amp;_comments=true";
const aSinglePostURL=`${API_BASE_URL}${aPostEndPoint}${id}${moreDataPoint}`;
const out=document.getElementById('aPost');


/**
 * @param {*} url 
 * @returns single post
 */
async function getAPost (url) {
    try {
        const accessToken = localStorage.getItem('accessToken'); 
        const options = {
            method: 'GET', 
            headers : {
                Authorization: `Bearer ${accessToken}`,
            }
        }
        console.log(url);
        console.log(accessToken);

        const response = await fetch(url,options); 
        console.log(response);
        const posts = await response.json();
        console.log(posts);
        listAPost(posts,out);
       

    } catch(error) {
        console.warn(error);
    }
}
getAPost(aSinglePostURL);


async function getEditPost (url) {
    try {
        const accessToken = localStorage.getItem('accessToken'); 
        const options = {
            method: 'GET', 
            headers : {
                Authorization: `Bearer ${accessToken}`,
            }
        }
        console.log(url);
        console.log(accessToken);

        const response = await fetch(url,options); 
        console.log(response);
        const posts = await response.json();
        console.log(posts);
        listEditPost(posts)

    } catch(error) {
        console.warn(error);
    }
}
getEditPost(aSinglePostURL);


/**
 * delete post
 * @param {*} url
 * @returns status code
 */

const deletePostUrl=`${API_BASE_URL}${aPostEndPoint}${id}`;

const deleteBtn=document.getElementById('deleteBtn');


localStorage.getItem('userName');
deleteBtn.addEventListener('click',(e)=>{
    e.preventDefault();
    console.log("delete btn clicked");
    
    deletePost(deletePostUrl);
})


/**
 * edit post
 * @param {*} url
 * @returns a post
 */
const editBtn=document.getElementById('editBtn');

editBtn.addEventListener('click',(e)=>{
    e.preventDefault();
    console.log("edit btn clicked");
    
    listEditPost(posts);
   

})



</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#deletePostUrl">deletePostUrl</a></li><li><a href="global.html#editBtn">editBtn</a></li><li><a href="global.html#getAPost">getAPost</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Wed Oct 12 2022 09:07:34 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
